// app/_layout.tsx
import React from "react";
import "./_dev/seed_coins";

import { Slot } from "expo-router";
import AppProviders from "./AppProviders";
import { StreakProvider } from "./context/StreakContext";
import ThemeOverlay from "./components/ThemeOverlay";

import { FxProvider } from "./context/FxProvider"; // âœ… root-level FX context

export default function RootLayout() {
  return (
    <StreakProvider>
      <AppProviders>
        <FxProvider>
          <ThemeOverlay />
          <Slot />
        </FxProvider>
      </AppProviders>
    </StreakProvider>
  );
}

if (__DEV__) {
  import("@react-native-async-storage/async-storage").then(AS => {
    AS.default.setItem("@nova/coins.v1", "999999").then(() =>
      console.log("ðŸ’° Dev coins granted")
    );
  });
}

// --- DEV ONLY: Stripe env probe ---
import StripeProbe from "./_dev/StripeProbe";
// inside your RootLayout component's JSX, add <StripeProbe /> near the top-level:
